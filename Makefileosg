
EXEC = osgPlume

CC = g++ -g -O2 -Wall -DNDEBUG
CSRC 	= osgPlume.cpp framebufferObject.cpp renderbuffer.cpp GLSL.cpp glErrorUtil.cpp particleControl.cpp displayControl.cpp Timer.cpp particleEmitter.cpp pointEmitter.cpp sphereEmitter.cpp plumeControl.cpp collectionBox.cpp util.cpp
COBJS   = $(CSRC:.cpp=.o)

PLUME_DIR = Modular_QUICPLUME
FSRCS =	$(PLUME_DIR)/DataModule.f90 $(PLUME_DIR)/ReadFiles.f90
FOBJS =  $(FSRCS:.f90=.o)
FOBJSS = DataModule.o ReadFiles.o

INCLUDE_PATH =  -I/home/cs/vr/software/osg-1.2.dist/include -I/home/cs/vr/software/glew-1.3.4.dist/include
LIB_PATH =   -L/home/cs/vr/software/osg-1.2.dist/lib -L/home/cs/vr/software/glew-1.3.4.dist/lib

LIB = -losg -losgProducer -losgUtil -lProducer -lOpenThreads -losgGA -losgDB -Wl,-rpath=/home/cs/vr/software/glew-1.3.4.dist/lib -lGLEW -lglut -lGL

# compile with gfortran
FCLOC	= /usr
FC	= $(FCLOC)/bin/gfortran
FCFLAGS	= -O3 -fdefault-double-8 -fdefault-real-8 -fdefault-integer-8 -ffree-form -ftree-vectorize

FLAGS = $(INCLUDE_PATH) $(LIB_PATH) $(LIB)

$(EXEC): $(COBJS) $(FOBJS)
	$(CC) -o $(EXEC) $(COBJS) $(FOBJSS) $(FLAGS) -L$(FLOC)/lib -lgfortran

%.o : %.cpp
	$(CC) -c $(INCLUDE_PATH) $<

%.o : %.f90
	$(FC) $(FCFLAGS) -c $<

clean:
	rm -f $(EXEC) *.o